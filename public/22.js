(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{255:function(e,t,i){"use strict";i.r(t);var a={layout:"admin",middleware:["auth","admin"],metaInfo:{title:"Category",titleTemplate:"%s | Khodgi"},data:function(){return{text:"",dialog:!1,snackbar:!1,headers:[{text:"#",align:"start",sortable:!1,value:"id"},{text:"Image",value:"image"},{text:"Name",value:"name"},{text:"Parent ID",value:"parent_id"},{text:"Active",value:"is_active"},{text:"Menu",value:"is_menu"},{text:"Home Section",value:"is_home_section"},{text:"Order",value:"order"},{text:"Actions",value:"action",sortable:!1}],categories:[],status:[{text:"Yes",value:!0},{text:"No",value:!1}],rules:{required:function(e){return!!e||"This Field is Required"}},editedIndex:-1,editedItem:{id:"",name:"",parent_id:"",image:"",is_active:"",is_menu:"",is_home_section:"",order:""},defaultItem:{id:"",name:"",parent_id:"",image:"",is_active:"",is_menu:"",is_home_section:"",order:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"New Category":"Edit Category"}},watch:{dialog:function(e){e||this.close()}},created:function(){this.initialize()},methods:{initialize:function(){var e=this;axios.interceptors.request.use((function(t){return e.loading=!0,t}),(function(t){return e.loading=!1,Promise.reject(t)})),axios.interceptors.response.use((function(t){return e.loading=!1,t}),(function(t){return e.loading=!1,Promise.reject(t)})),axios.get("/api/admin/categories").then((function(t){return e.categories=t.data.data})).catch((function(e){console.log(e)}))},uploadPhoto:function(e){var t=this;if(null!=this.editedItem.image){var i=this.categories.indexOf(e),a=new FormData;a.append("photo",this.editedItem.image,this.editedItem.image.name),a.append("category",e.id),axios.post("/api/admin/categories/change-photo",a).then((function(e){t.categories[i].image=e.data.category.image,t.editedItem.image=null})).catch((function(e){return console.log(e.response)}))}},updateActiveStatus:function(e){var t=this,i=this.categories.indexOf(e);axios.post("/api/admin/categories/change-active",{is_active:e.is_active,category:e.id}).then((function(e){t.text="Categories active status updated successfully.",t.snackbar=!0})).catch((function(e){t.categories[i].role=e.response,t.snackbar=!0,console.dir(e.response)}))},updateMenuStatus:function(e){var t=this,i=this.categories.indexOf(e);axios.post("/api/admin/categories/change-menu",{is_menu:e.is_menu,category:e.id}).then((function(e){t.text="Categories menu status updated successfully.",t.snackbar=!0})).catch((function(e){t.categories[i].role=e.response,t.snackbar=!0,console.dir(e.response)}))},updateHsectionStatus:function(e){var t=this,i=this.categories.indexOf(e);axios.post("/api/admin/categories/change-home-section",{is_home_section:e.is_home_section,category:e.id}).then((function(e){t.text="Categories home section status updated successfully.",t.snackbar=!0})).catch((function(e){t.categories[i].role=e.response,t.snackbar=!0,console.dir(e.response)}))},editItem:function(e){this.editedIndex=this.categories.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){var t=this,i=this.categories.indexOf(e);confirm("Are you sure you want to delete this item?")&&axios.delete("/api/admin/categories/"+e.id).then((function(e){t.snackbar=!0,t.categories.splice(i,1)})).catch((function(e){return console.log(e.response)}))},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},save:function(){var e=this;this.editedIndex>-1?(axios.put("/api/admin/categories/"+this.editedItem.id,this.editedItem),Object.assign(this.categories[this.editedIndex],this.editedItem)):axios.post("/api/admin/categories",this.editedItem).then((function(t){e.categories.push(t.data.category)})).catch((function(e){return console.dir(e.response)})),this.close()},getColor:function(e){return 0==e?"red":"green"}}},s=i(0),n=Object(s.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.categories,"sort-by":"id"},scopedSlots:e._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:"",color:"white"}},[i("v-toolbar-title",[e._v("Categories")]),e._v(" "),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),i("v-spacer"),e._v(" "),i("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},a),[e._v("New Category")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),e._v(" "),i("v-card-text",[i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[i("v-text-field",{attrs:{label:"Name"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}}),e._v(" "),i("v-text-field",{attrs:{label:"Parent ID"},model:{value:e.editedItem.parent_id,callback:function(t){e.$set(e.editedItem,"parent_id",t)},expression:"editedItem.parent_id"}}),e._v(" "),-1==e.editedIndex?i("v-select",{attrs:{items:e.status,"item-text":e.status.text,"item-value":e.status.value,label:"Select IsActive Status"},model:{value:e.editedItem.is_active,callback:function(t){e.$set(e.editedItem,"is_active",t)},expression:"editedItem.is_active"}}):e._e(),e._v(" "),-1==e.editedIndex?i("v-select",{attrs:{items:e.status,"item-text":e.status.text,"item-value":e.status.value,label:"Select IsMenu Status"},model:{value:e.editedItem.is_menu,callback:function(t){e.$set(e.editedItem,"is_menu",t)},expression:"editedItem.is_menu"}}):e._e(),e._v(" "),-1==e.editedIndex?i("v-select",{attrs:{items:e.status,"item-text":e.status.text,"item-value":e.status.value,label:"Select IsHomeSection Status"},model:{value:e.editedItem.is_home_section,callback:function(t){e.$set(e.editedItem,"is_home_section",t)},expression:"editedItem.is_home_section"}}):e._e(),e._v(" "),i("v-text-field",{attrs:{label:"Order"},model:{value:e.editedItem.order,callback:function(t){e.$set(e.editedItem,"order",t)},expression:"editedItem.order"}})],1)],1)],1)],1),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",text:""},on:{click:e.close}},[e._v("Cancel")]),e._v(" "),i("v-btn",{attrs:{color:"primary",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var a=t.item;return[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},[e._v("\n        mdi-pencil\n      ")]),e._v(" "),i("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},[e._v("\n        mdi-delete\n      ")])]}},{key:"no-data",fn:function(){return[i("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])]},proxy:!0},{key:"item.is_active",fn:function(t){var a=t.item;return[i("v-edit-dialog",{attrs:{large:"",block:"",persistent:"","return-value":a.is_active},on:{"update:returnValue":function(t){return e.$set(a,"is_active",t)},"update:return-value":function(t){return e.$set(a,"is_active",t)},save:function(t){return e.updateActiveStatus(a)}},scopedSlots:e._u([{key:"input",fn:function(){return[i("v-select",{attrs:{items:e.status,"item-text":e.status.text,"item-value":e.status.value,label:"Select Status"},model:{value:a.is_active,callback:function(t){e.$set(a,"is_active",t)},expression:"item.is_active"}})]},proxy:!0}],null,!0)},[i("v-chip",{attrs:{color:e.getColor(a.is_active),dark:""}},[1==a.is_active?i("span",[e._v("Yes")]):i("span",[e._v("No")])])],1)]}},{key:"item.is_menu",fn:function(t){var a=t.item;return[i("v-edit-dialog",{attrs:{large:"",block:"",persistent:"","return-value":a.is_menu},on:{"update:returnValue":function(t){return e.$set(a,"is_menu",t)},"update:return-value":function(t){return e.$set(a,"is_menu",t)},save:function(t){return e.updateMenuStatus(a)}},scopedSlots:e._u([{key:"input",fn:function(){return[i("v-select",{attrs:{items:e.status,"item-text":e.status.text,"item-value":e.status.value,label:"Select Status"},model:{value:a.is_menu,callback:function(t){e.$set(a,"is_menu",t)},expression:"item.is_menu"}})]},proxy:!0}],null,!0)},[i("v-chip",{attrs:{color:e.getColor(a.is_menu),dark:""}},[1==a.is_menu?i("span",[e._v("Yes")]):i("span",[e._v("No")])])],1)]}},{key:"item.is_home_section",fn:function(t){var a=t.item;return[i("v-edit-dialog",{attrs:{large:"",block:"",persistent:"","return-value":a.is_home_section},on:{"update:returnValue":function(t){return e.$set(a,"is_home_section",t)},"update:return-value":function(t){return e.$set(a,"is_home_section",t)},save:function(t){return e.updateHsectionStatus(a)}},scopedSlots:e._u([{key:"input",fn:function(){return[i("v-select",{attrs:{items:e.status,"item-text":e.status.text,"item-value":e.status.value,label:"Select Status"},model:{value:a.is_home_section,callback:function(t){e.$set(a,"is_home_section",t)},expression:"item.is_home_section"}})]},proxy:!0}],null,!0)},[i("v-chip",{attrs:{color:e.getColor(a.is_home_section),dark:""}},[1==a.is_home_section?i("span",[e._v("Yes")]):i("span",[e._v("No")])])],1)]}},{key:"item.image",fn:function(t){var a=t.item;return[i("v-edit-dialog",{scopedSlots:e._u([{key:"input",fn:function(){return[i("v-file-input",{attrs:{label:"Select Photo",placeholder:"Upload Avatar",accept:"image/jpg, image/png, image/bmp, image/jpeg"},on:{change:function(t){return e.uploadPhoto(a)}},model:{value:e.editedItem.image,callback:function(t){e.$set(e.editedItem,"image",t)},expression:"editedItem.image"}})]},proxy:!0}],null,!0)},[i("v-avatar",{attrs:{size:"36px"}},[i("img",{attrs:{src:a.image,alt:"Avatar"}})])],1)]}}])}),e._v(" "),i("v-snackbar",{model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    "+e._s(e.text)+"\n    "),i("v-btn",{attrs:{color:"white",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n        Close\n    ")])],1)],1)}),[],!1,null,null,null);t.default=n.exports}}]);