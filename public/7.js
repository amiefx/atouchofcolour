(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{149:function(t,e,s){"use strict";s.r(e);var i={layout:"khod",middleware:["auth"],metaInfo:{title:"Profile",titleTemplate:"%s | Khodgi"},data:function(){return{valid:!0,dialog:!1,dialogPhoto:!1,selectedFile:null,users:{id:"",name:"",email:"",role:"",photo:"",password:"",password_confirmation:"",current_password:"",created_at:""},item:[],editedIndex:-1,editedItem:{id:"",name:"",email:"",role:"",photo:"",created_at:""},rules:{required:function(t){return!!t||"This Field is Required"},min:function(t){return t.length>=4||"Minimum 5 Chracters Required"},validEmail:function(t){return/.+@.+\..+/.test(t)||"Email must be valid"}}}},methods:{uploadPhoto:function(t){var e=this;if(null!=this.editedItem.photo){this.users.id;var s=new FormData;s.append("photo",this.editedItem.photo,this.editedItem.photo.name),s.append("user",this.users.id),axios.post("/api/change-photo",s).then((function(t){e.users=t.data.user})).catch((function(t){return console.log(t.response)}))}},save:function(){var t=this;axios.put("/api/settings/password",this.users).then((function(e){t.users=e.data.data,t.text="Record Updated Successfully!",t.snackbar=!0,t.dialog=!1,t.$router.push("/signin")})).catch((function(e){console.log(e.response),t.text="Error Updating Record",t.snackbar=!0}))}},created:function(){var t=this;axios.get("/api/me").then((function(e){t.users=e.data.data})).catch((function(t){console.log(t.response)}))},computed:{passwordMatch:function(){return this.users.password==this.users.password_confirmation||"Password does Not Match"},userdata:function(){}}},o=s(0),a=Object(o.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-card",{staticClass:"mx-auto"},[s("v-list",[s("v-list-item",[s("v-list-item-icon",[s("v-list-item-avatar",[s("v-img",{attrs:{src:t.users.photo}})],1)],1),t._v(" "),s("v-list-item-content"),t._v(" "),s("v-list-item-action",[s("v-dialog",{attrs:{"max-width":"300px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[s("v-btn",t._g({attrs:{icon:""}},i),[s("v-icon",[t._v("mdi-camera-account")])],1)]}}]),model:{value:t.dialogPhoto,callback:function(e){t.dialogPhoto=e},expression:"dialogPhoto"}},[t._v(" "),s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[t._v("Update Profile Photo")])]),t._v(" "),s("v-card-text",[s("v-col",{attrs:{cols:"12"}},[s("v-file-input",{attrs:{label:"Select Photo",placeholder:"Upload Avatar",accept:"image/jpg, image/png, image/bmp, image/jpeg"},on:{change:function(e){return t.uploadPhoto(t.item)}},model:{value:t.editedItem.photo,callback:function(e){t.$set(t.editedItem,"photo",e)},expression:"editedItem.photo"}})],1)],1)],1)],1)],1)],1),t._v(" "),s("v-list-item",[s("v-list-item-content",[s("v-list-item-title",{staticClass:"title"},[t._v(t._s(t.users.name))]),t._v(" "),s("v-list-item-subtitle",[t._v(t._s(t.users.email))])],1),t._v(" "),s("v-list-item-action",[s("v-icon",{on:{click:function(e){t.dialog=!t.dialog}}},[t._v("mdi-pencil")])],1)],1)],1),t._v(" "),s("v-divider"),t._v(" "),s("v-list",[s("v-list-item",[s("v-list-item-icon",[s("v-icon",{attrs:{color:"indigo"}},[t._v("mdi-email")])],1),t._v(" "),s("v-list-item-content",[s("v-list-item-title",[t._v(t._s(t.users.email))]),t._v(" "),s("v-list-item-subtitle",[t._v("Email")])],1)],1),t._v(" "),s("v-divider",{attrs:{inset:""}}),t._v(" "),s("v-list-item",[s("v-list-item-icon",[s("v-icon",{attrs:{color:"indigo"}},[t._v("mdi-account-box")])],1),t._v(" "),s("v-list-item-content",[s("v-list-item-title",[t._v(t._s(t.users.name))]),t._v(" "),s("v-list-item-subtitle",[t._v("User Name")])],1)],1)],1)],1),t._v(" "),s("v-dialog",{attrs:{width:"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",{},[t._v("Update Profile")]),t._v(" "),s("v-form",{attrs:{method:"post"},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.save(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-card-text",[s("v-container",[s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{"prepend-icon":"mdi-mail",placeholder:"User Name",rules:[t.rules.required,t.rules.min]},model:{value:t.users.name,callback:function(e){t.$set(t.users,"name",e)},expression:"users.name"}}),t._v(" "),s("v-text-field",{attrs:{type:"password","prepend-icon":"mdi-lock",placeholder:"Current Password",rules:[t.rules.required]},model:{value:t.users.current_password,callback:function(e){t.$set(t.users,"current_password",e)},expression:"users.current_password"}}),t._v(" "),s("v-text-field",{attrs:{type:"password","prepend-icon":"mdi-lock",placeholder:"New Password",rules:[t.rules.required]},model:{value:t.users.password,callback:function(e){t.$set(t.users,"password",e)},expression:"users.password"}}),t._v(" "),s("v-text-field",{attrs:{type:"password","prepend-icon":"mdi-lock",placeholder:"Confirm Password",rules:[t.rules.required,t.passwordMatch]},model:{value:t.users.password_confirmation,callback:function(e){t.$set(t.users,"password_confirmation",e)},expression:"users.password_confirmation"}})],1)],1)],1),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Cancel")]),t._v(" "),s("v-btn",{attrs:{color:"primary",type:"submit",disabled:!t.valid},on:{click:function(e){return e.preventDefault(),t.save(e)}}},[t._v("Save")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=a.exports}}]);